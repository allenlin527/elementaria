# 角色系統與進展設計詳述

## I. 核心角色架構

基於項目文件的規劃，我建議實施以下角色系統架構，著重於輕量級設計而保留深度玩法：

### 基礎屬性系統

角色系統以三個核心屬性為基礎，確保簡單易懂同時提供足夠進展空間：

1. **元素親和力**：代表與玩家選擇主元素的連結強度
   - 初始值由玩家選擇的主元素決定（起始值80）
   - 影響該元素魔法效果、施法速度與資源消耗
   - 提供明確優勢，引導玩家專精發展路線

2. **元素調和力**：決定使用非主元素能力的效能
   - 所有非主元素起始值較低（起始值30）
   - 透過使用非主元素魔法和完成特定任務提升
   - 影響組合魔法效果，鼓勵多元發展

3. **魔法理解力**：影響學習與掌握新法術的能力
   - 所有玩家起始基本值（起始值50）
   - 透過探索、解決謎題與NPC互動提升
   - 降低學習新法術所需時間，影響法術複雜性解鎖

### 進展架構設計

遊戲進展系統基於三階段模型，符合故事中的三大區域設計：

1. **覺醒階段**（和諧村）
   - 發現與確認主元素親和力
   - 掌握1-2個基礎元素法術
   - 理解基本元素相生相剋關係
   - 完成村莊穩定任務，提升主元素親和力

2. **調和階段**（元素混亂森林）
   - 開始探索非主元素能力
   - 提升元素調和力至關鍵閾值
   - 學習組合效果（如火+土創造熔岩效果）
   - 掌握第二元素的基礎法術

3. **融合階段**（遺忘神殿）
   - 實現四元素基本平衡
   - 解鎖高階元素調和技能
   - 完成元素使者身份確認
   - 可在特定元素法陣中激發潛力，臨時提升能力

## II. 元素魔法技能系統

### 魔法學習與使用機制

基於「簡單但有深度」的原則，每個元素提供三種核心技能，通過重組創造更豐富玩法：

1. **技能獲取方式**：
   - 基礎技能：每個元素一項基礎技能自動獲得
   - 進階技能：通過NPC教學或特定任務解鎖
   - 隱藏技能：需要特定元素調和條件與特殊環境互動才能發現

2. **技能使用限制**：
   - 非主元素技能消耗更多精力值
   - 元素調和力低時有失敗率（視覺效果顯示不穩定）
   - 某些技能組合需特定元素調和力閾值才能觸發

3. **技能進階機制**：
   - 重複使用提升技能熟練度（1-5星）
   - 熟練度影響效果強度、持續時間與精力消耗
   - 解鎖技能變體（如標準火球→分裂火球→持續燃燒火球）

### 元素技能框架與進展

**火元素技能樹**
```
火球術 (基礎) → 火焰波動 (進階) → 熾熱風暴 (大師)
     ↓
熱能轉化 (專精) → 物質熔解 (進階) → 元素淨化 (大師) 
     ↓
激情鼓舞 (專精) → 意志之火 (進階) → 不滅意志 (大師)
```

**水元素技能樹**
```
水流控制 (基礎) → 水壓衝擊 (進階) → 潮汐之力 (大師)
     ↓
治癒之泉 (專精) → 生命活泉 (進階) → 再生之水 (大師)
     ↓
霧氣屏障 (專精) → 水鏡幻象 (進階) → 元素折射 (大師)
```

**風元素技能樹**
```
疾風推動 (基礎) → 風壓斬擊 (進階) → 風暴之怒 (大師)
     ↓
聲音傳遞 (專精) → 風語傾聽 (進階) → 元素共鳴 (大師)
     ↓
氣流感知 (專精) → 風之眼 (進階) → 全知之風 (大師)
```

**土元素技能樹**
```
塑土成形 (基礎) → 大地塑造 (進階) → 地質重構 (大師)
     ↓
大地連結 (專精) → 元素穩定 (進階) → 世界錨點 (大師)
     ↓
石盾防護 (專精) → 岩壁屏障 (進階) → 不破之甲 (大師)
```

## III. 角色進展與動力設計

### 進展機制與節奏控制

設計四個明確進展支柱，確保玩家持續感受成長：

1. **元素親和成長**
   - 完成主線任務：+5-10 親和力
   - 解決元素危機：+3-5 親和力
   - 使用元素調和石：+15 親和力（稀有道具）
   - 親和力上限：初始階段100，中期150，後期200

2. **技能解鎖與強化**
   - 基礎技能：遊戲開始自動獲得
   - 專精技能：完成特定NPC任務（每區域1-2個）
   - 進階技能：需達到50點對應元素親和力
   - 大師技能：需達到100點對應元素親和力，完成特殊試煉

3. **NPC關係發展**
   - 三階段好感度：中立→友好→信任
   - 每階段解鎖特定對話、任務與獎勵
   - 關鍵NPC（如奧林）信任度影響技能解鎖

4. **區域探索與知識收集**
   - 發現元素知識點：提升魔法理解力
   - 區域探索完成度：解鎖區域元素加成
   - 元素謎題解決：提升對應元素調和力

### 進展視覺化與反饋系統

強化進展感知，確保玩家隨時能感受成長：

1. **元素親和視覺效果**
   - 親和力提升時角色外觀subtle變化（如火元素使用者光環微妙變色）
   - 施法效果隨親和力增強（更華麗但不過度）
   - UI中元素圖示亮度反映親和等級

2. **技能進展顯示**
   - 技能圖示周圍星級顯示（1-5星）
   - 使用次數與熟練度百分比
   - 下一級解鎖效果預覽

3. **成就與里程碑系統**
   - 元素掌控者：各元素親和力達特定值
   - 調和大師：成功施放組合元素效果次數
   - 和諧使者：解決特定數量元素危機

## IV. 多人互動與角色協作

基於遊戲的輕量級多人特性，設計協作進展系統：

1. **元素共鳴機制**
   - 不同主元素玩家共同施法產生額外效果
   - 例如：火+風玩家協作創造「烈焰風暴」效果
   - 協作次數累積提升共鳴等級，解鎖更強力組合效果

2. **元素協作任務**
   - 特定世界事件需要多種元素共同解決
   - 完成協作任務獲得獨特「共鳴碎片」
   - 收集足夠碎片解鎖特殊共鳴技能

3. **多人法陣系統**
   - 遺忘神殿區域中的元素法陣需多人激活
   - 玩家站在符合主元素的位置，共同施法
   - 成功激活提供全體成員臨時元素增幅

## V. 技術實現考量

### 角色數據存儲與同步策略

考慮輕量級無登入設計特性，實施以下存儲方案：

1. **臨時存儲方案**
   - 使用localStorage存儲基本角色資料
   - 使用sessionStorage存儲當前遊戲進度
   - 關鍵進展節點生成唯一code，允許玩家記錄並在未來輸入恢復進度

2. **最小同步數據集**
   - 僅同步關鍵數據：位置、主元素、外觀、當前行動
   - 使用增量更新模式減少傳輸量
   - 採用事件驅動同步而非狀態輪詢

### 性能優化策略

根據不同設備性能調整角色系統複雜度：

1. **自適應元素效果**
   - 高性能設備：完整粒子效果與動態光源
   - 中等性能：簡化粒子效果，靜態光源
   - 低性能：僅CSS基本過渡效果，無粒子系統

2. **按需加載元素資源**
   - 只預加載玩家主元素資源
   - 其他元素資源在需要時動態加載
   - 使用低分辨率佔位圖標，待加載完成後替換

## VI. 實施建議與優先級

### MVP階段建議

為確保快速實現可遊玩版本，建議以下實施優先級：

1. **第一階段**（核心系統）
   - 實現三大基本屬性
   - 每個元素僅實現一個基礎技能
   - 和諧村區域完整實現
   - 基本角色數據存儲（localStorage）

2. **第二階段**（進展增強）
   - 添加技能熟練度系統
   - 實現元素調和基礎機制
   - 開放元素混亂森林區域
   - 加入多人協作基本功能

3. **第三階段**（完整體驗）
   - 實現完整技能樹系統
   - 開放遺忘神殿與最終挑戰
   - 完善元素共鳴與協作系統
   - 添加進度恢復與分享功能

### 技術實施藍圖

為配合ThreeJS和輕量級設計目標，推薦以下實施路線：

```javascript
// 核心角色模塊示例架構
const CharacterSystem = {
    // 基本屬性管理
    attributes: {
        initializeAttributes(mainElement) {
            // 根據選擇的主元素初始化屬性
            return {
                elementalAffinity: {
                    fire: mainElement === 'fire' ? 80 : 30,
                    water: mainElement === 'water' ? 80 : 30,
                    wind: mainElement === 'wind' ? 80 : 30,
                    earth: mainElement === 'earth' ? 80 : 30
                },
                magicUnderstanding: 50,
                // 其他核心屬性
            };
        },
        
        // 屬性增長管理
        increaseAffinity(element, amount) {
            // 增加特定元素親和力，帶上限檢查
        }
    },
    
    // 技能系統
    skills: {
        unlockSkill(skillId) {
            // 解鎖特定技能
        },
        
        useSkill(skillId, targetId = null) {
            // 施放技能，計算成功率與效果
        },
        
        increaseSkillMastery(skillId) {
            // 提升技能熟練度
        }
    },
    
    // 進展追蹤
    progression: {
        completeQuest(questId) {
            // 完成任務後的獎勵和進展更新
        },
        
        discoverKnowledge(knowledgeId) {
            // 發現新知識點
        },
        
        updateNPCRelationship(npcId, amount) {
            // 更新NPC關係
        }
    },
    
    // 存儲與同步
    storage: {
        saveProgress() {
            // 保存進度到localStorage
        },
        
        generateProgressCode() {
            // 生成可分享的進度代碼
        },
        
        loadFromProgressCode(code) {
            // 從代碼恢復進度
        }
    }
};
```

## VII. 角色系統評估與風險控制

### 潛在風險與解決方案

1. **進展失衡風險**
   - 風險：玩家過度專注單一元素，缺乏多元素體驗
   - 解決方案：設計強制需要多元素的關卡與謎題，提供元素平衡獎勵

2. **技術限制風險**
   - 風險：複雜元素效果可能在低性能設備上導致卡頓
   - 解決方案：實施自適應效果系統，針對設備性能調整視覺複雜度

3. **多人同步風險**
   - 風險：多人場景中角色能力同步延遲導致體驗不佳
   - 解決方案：實施預測模型，本地先顯示預期結果，後台確認後微調

### 成功指標與測量方法

建立以下關鍵指標評估角色系統成功度：

1. **角色進展速度**
   - 目標：平均每30分鐘有明顯進展感
   - 測量：追蹤玩家解鎖技能、提升屬性的時間間隔

2. **元素平衡使用率**
   - 目標：玩家使用非主元素技能佔比不低於30%
   - 測量：記錄各元素技能使用次數與比例

3. **完成率與留存**
   - 目標：70%玩家完成第一區域，50%完成第二區域
   - 測量：區域完成數據與玩家回訪率

---

此角色系統設計專注於在技術限制下提供豐富的進展體驗，平衡了即時進入與深度玩法的需求。通過元素親和力、技能熟練度與多人協作三大支柱，確保玩家在簡化系統中仍能感受明確成長路徑與成就感。最後，採用模塊化實施方案確保MVP階段快速交付基礎體驗，同時為後續迭代留下擴展空間。